---
title: C++内存管理- 1~3 内存分配的每一个层面
date: 2022-05-29 19:55:00 -0500
categories: [笔记]
tags: [内存管理]
pin: false
author: 01

toc: true
comments: true
typora-root-url: ../../Sterben-01.github.io
math: false
mermaid: true

---

# C++内存管理 - 1~3 内存分配的每一个层面

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=410446173&amp;auto=1&amp;height=66"> </iframe>

# 此笔记需要等待更新和确认。



![QQ截图20220529201640](/assets/blog_res/2022-05-29-memory1.assets/QQ%E6%88%AA%E5%9B%BE20220529201640.png)



![QQ截图20220529201640](/assets/blog_res/2022-05-29-memory1.assets/QQ%E6%88%AA%E5%9B%BE20220529201640-16538734497572.png)

![QQ截图20220529201724](/assets/blog_res/2022-05-29-memory1.assets/QQ%E6%88%AA%E5%9B%BE20220529201724.png)

### 我们由上图可以看出malloc和free是比new delete更底层的东西。malloc和free属于c函数，而new和delete属于c++表达式。



## 内存分配方式：

![QQ截图20220529202032](/assets/blog_res/2022-05-29-memory1.assets/QQ%E6%88%AA%E5%9B%BE20220529202032-16538736739556.png)

1. 使用`malloc`分配特定大小的内存。使用`malloc`会返回一个未定类型的指针。

   **类型决定了指向的内存空间的大小. 编译器依靠指针类型来决定到底读取到哪一个字节。因为你只能确定开始地址，如果不给指针类型，编译器不知道你要读取1个字节还是100个字节为止**

2. 使用`new`分配特定大小的内存。使用`new`需要指定其类型。一般后接class名称指定类型。返回一个该类型的指针。

3. 使用`::operator new `分配特定大小的内存。`::operator new`其实就是包装过的`malloc`。一样返回一个未定类型指针。

​	**记住。free和delete释放的是指针指向的地址，而不是指针本身。指针本身依旧存在。因此，指针会指向释放过的地址，可能引发错误。所以记得要将指针本身置空。**
