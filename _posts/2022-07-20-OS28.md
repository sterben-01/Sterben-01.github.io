---
title: 王道操作系统笔记-内存内存（25）-- 内存管理7
date: 2022-07-20 01:55:00 -0500
categories: [笔记]
tags: [操作系统]
pin: false
author: 01

toc: true
comments: true
typora-root-url: ../../Sterben-01.github.io
math: false
mermaid: true

---

# 王道操作系统笔记-内存内存（25）-- 内存管理7

###  非连续分配管理方式（2）基本分段存储管理

**每一个进程都有一个自己的段表**

这个其实说回来和分页差不多。只不过分段机制是按照自身逻辑来划分的。每一个段有一个段名。每段从0开始编址。

- 进程的地址空间:按照程序自身的逻辑关系划分为若干个段，每个段都有一个段名（在低级语言中，程序员使用段名来编程），每段从0开始编址。
- 内存分配规则:以段为单位进行分配，每个段在内存中占据连续空间，但各段之间可以不相邻。

![QQ截图20220720054847](/assets/blog_res/2022-07-20-OS28.assets/QQ%E6%88%AA%E5%9B%BE20220720054847.png)



我们也会有段表。结构和页表不太一样。段表项长度是相同的。储存了段长和段的基地址。又因为段表是连续存放的。所以段号可以隐含。

![QQ截图20220720054911](/assets/blog_res/2022-07-20-OS28.assets/QQ%E6%88%AA%E5%9B%BE20220720054911.png)



- 页是信息的物理单位。分页的主要目的是为了实现离散分配，提高内存利用率。分页仅仅是系统管理上的需要，完全是系统行为，对用户是不可见的。
- 段是信息的逻辑单位。分页的主要目的是更好地满足用户需求。一个段通常包含着一组属于一个逻辑模块的信息。分段对用户是可见的，用户编程时需要显式地给出段名。
- 页的大小固定且由系统决定。段的长度却不固定，决定于用户编写的程序。
- 分页的用户进程地址空间是一维的，程序员只需给出一个记忆符即可表示一个地址。（页表储存的是页号和块号）仅需通过页号找块号。
- 分段的用户进程地址空间是二维的，程序员在标识一个地址时，既要给出段名，也要给出段内地址。（段表储存的是段名和起始地址，需要给出这两者来寻找段）。
- 分段比分页更容易实现信息的共享和保护。不能被修改的代码称为纯代码或可重入代码（不属于临界资源），这样的代码是可以共享的。可修改的代码是不能共享的
- 访问一个逻辑地址需要几次访存?
- 分页（单级页表)﹔第一次访存――查内存中的页表，第二次访存――访问目标内存单元。总共两次访存
- 分段:第一次访存――查内存中的段表，第二次访存――访问目标内存单元。总共两次访存
- 与分页系统类似，分段系统中也可以引入快表机构，将近期访问过的段表项放到快表中，这样可以少一次访间，加快地址变换速度。
