---
title: 王道操作系统笔记-进程（20）-- 内存管理2
date: 2022-06-02 09:55:00 -0500
categories: [笔记]
tags: [操作系统]
pin: false
author: 01

toc: true
comments: true
typora-root-url: ../../Sterben-01.github.io
math: false
mermaid: true

---

# 王道操作系统笔记-内存（20）-- 内存管理2

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=410446173&amp;auto=1&amp;height=66"> </iframe>

## 内存空间的扩充

### 覆盖技术

**这个非常像笔记c++内存管理12~13中用union联合体来优化next指针的操作**

覆盖技术的思想：将程序分为多个段（多个模块)。常用的段常驻内存，不常用的段在需要时调入内存。内存中分为一个“固定区”和若干个“覆盖区”。需要常驻内存的段放在“固定区”中，调入后就不再调出（除非运行结束)。不常用的段放在“覆盖区”，需要用到时调入内存，用不到时调出内存。

![QQ截图20220602111417](/assets/blog_res/2022-06-02-OS23.assets/QQ%E6%88%AA%E5%9B%BE20220602111417.png)



**必须由程序员声明覆盖结构，操作系统自动完成覆盖。缺点：对用户不透明，增加了用户变成负担。覆盖技术只用于早期的操作系统中。**



## 交换技术 （中级调度）

交换（对换）技术的设计思想：内存空间紧张时，系统将内存中某些进程暂时换出外存，把外存中某些已具备运行条件的进程换入内存（进程在内存与磁盘间动态调度)

**暂时换出外存等待的进程状态为挂起状态（挂起态，suspend)。挂起态又可以进一步细分为就绪挂起、阻塞挂起两种状态**

1. 应该在外存（磁盘）的什么位置保存被换出的进程?
   - 在具有对换功能的操作系统中，通常把磁盘空间分为文件区和对换区两部分。文件区主要用于存放文件，主要追求存储空间的利用率，因此对文件区空间的管理采用离散分配方式;对换区空间只占磁盘空间的小部分，被换出的进程数据就存放在对换区。由于对换的速度直接影响到系统的整体速度，因此对换区空间的管理主要追求换入换出速度，因此通常对换区采用连续分配方式。总之，对换区的I/o速度比文件区的更快。
2. 什么时候应该交换?
   - 交换通常在许多进程运行且内存吃紧时进行，而系统负荷降低就暂停。例如:发现许多进程运行时经常发生缺页，就说明内存紧张，此时可以换出一些进程。如果缺页率明显下降，就可以暂停换出。
3. 应该换出哪些进程?
   - 可优先换出阻塞进程;可换出优先级低的进程;为了防止优先级低的进程在被调入内存后很快又被换出，有的系统还会考虑进程在内存的驻留时间....

**PCB会常驻内存，不会被换出至外存**



## 总结

![QQ截图20220602112031](/assets/blog_res/2022-06-02-OS23.assets/QQ%E6%88%AA%E5%9B%BE20220602112031.png)
